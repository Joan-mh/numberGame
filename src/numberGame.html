<!DOCTYPE html>
<title>Number Guessing Game</title>
<p id="output">I'm thinking of a number between 0 and 99.</p>
<input id="input" type="text" placeholder="Guess a number">
<button>guess</button>

<script type="text/javascript">
var mysteryNumber = Math.floor(Math.random() * 100);
var playerGuess = 0;
var guessesRemaining = 10;
var guessesMade = 0;
var gameState = "";
var gameWon = false;


//The input and output fields
var input = document.querySelector("#input");
var output = document.querySelector("#output");

//the button
var button = document.querySelector("button");
button.style.cursor = "pointer";
button.addEventListener("click", clickHandler, false);
window.addEventListener("keydown", keyDownHandler, false);


function keyDownHandler(event) {
    if(event.keyCode === 13) {
        validateInput();
    }
}

function clickHandler() {
    validateInput();
}

function playGame() {

    guessesRemaining = guessesRemaining -1;
    guessesMade++;
    gameState = "Guess: " + guessesMade + " Remaining: " + guessesRemaining;


    if (playerGuess === mysteryNumber) {
        gameWon = true;
    } else if (playerGuess > mysteryNumber) {
        output.innerHTML = "Too high! " + gameState;
    } else if (guessesRemaining < mysteryNumber){
        output.innerHTML = "Too low! " + gameState;
    }

    if (guessesRemaining === 0 || gameWon === true) {
        endGame();
    }

}

function validateInput() {
    playerGuess = parseInt(input.value);
    if (isNaN(playerGuess)) {
        output.innerHTML = "Please enter a number!";
    }
    else{
        playGame();
    }
}
function endGame()
{
    if (gameWon)
    {output.innerHTML = "You won! The number was " + mysteryNumber + "<br>"
        + "It took you " + guessesMade + " guesses.";

    }else
    {
        output.innerHTML = "No more guesses left! " +"<br>" + "The number was " + mysteryNumber + "<br>";
    }

    //Disable the button
    button.removeEventListener("click", clickHandler, false);
    button.disabled = true;

    //Disable the enter key
    window.removeEventListener("keydown", keyDownHandler, false);

    //Disable the input key
    input.disabled = true;
}
</script>
